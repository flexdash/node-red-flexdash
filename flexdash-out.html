<!-- FlexDash-out node for Node-RED
     Copyright Â©2021 by Thorsten von Eicken, see LICENSE
-->

<script type="text/javascript">
  RED.nodes.registerType('flexdash out', {
    category:"flexdash",
    color:"#F0E4B8",
    defaults:{
      name:   {value:""},
      server: {value:"", required:true, type:"flexdash dashboard"}
    },
    inputs: 1,
    outputs: 0,
    icon: "font-awesome/fa-th",
    paletteLabel: "raw flexdash out",
    label() { return this.name || "raw flexdash out" }		
  });
</script>

<script type="text/html" data-template-name="flexdash out">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-server"><i class="fa fa-tag"></i> Dashboard</label>
    <input type="text" id="node-input-server">
  </div>
</script>

<script type="text/html" data-help-name="flexdash out">
  <p>Send raw data to FlexDash dashboard widgets for display. For advanced usage.</p>
  <h3>Warning</h3>
    <p>This node is for advanced use of the FlexDash topic tree. Instead of using raw in and
      raw out nodes use nodes from the
      <a href="https://flows.nodered.org/node/@flexdash/node-red-fd-corewidgets">
        @flexdash/node-red-fd-corewidgets</a> module or from other contributed
      modules. These have a 1-1 correspondence between nodes in the Node-Red flow and widgets
      in FlexDash and are therefore easier and more reliable to use.
    </p>
  <h3>Input</h3>
    <p>Messages are forwarded to dashboards for insertion into their topic hierarchy.
      Inputs of widgets in the dashboard can be bound to these topics, which is how they
      receive data values to display. The values may have any JSON data type understood by
      the targeted widget(s).</p>
    <dl class="message-properties">
      <dt>topic <span class="property-type">string</span></dt>
      <dd>the target topic in the dashboard's topic hierarchy.</dd>
      <dt>payload <span class="property-type">any</span></dt>
      <dd>the value to send to the dashboard widget(s).</dd>
      <dt class="optional">_fd_socket <span class="property-type">string</span></dt>
      <dd>if omitted the message is broadcast to all dashboard instances, if set to 
        a value received from a FlexDash In node the message is only sent to that
        instance.</dd>
    </dl>
</script>
