<!-- FlexDash-in node for Node-RED
     Copyright Â©2021 by Thorsten von Eicken, see LICENSE
-->

<script type="text/javascript">
  RED.nodes.registerType('flexdash in', {
    category: "flexdash",
    color: "#F0E4B8",
    defaults: {
      name:  {value:""},
      server:{value:"", required:true, type:"flexdash dashboard"},
    },
    inputs: 0,
    outputs: 1,
    icon: "font-awesome/fa-th",
    paletteLabel: "raw flexdash in",

    label() { return this.name || "raw flexdash in" },
  });
</script>

<script type="text/html" data-template-name="flexdash in">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-server"><i class="fa fa-tag"></i> Dashboard</label>
    <input type="text" id="node-input-server">
  </div>
</script>

<script type="text/html" data-help-name="flexdash in">
  <p>Receives raw messages from FlexDash dashboard widgets for advanced usage.
    Input messages typically come from user input
    manipulating buttons, switches, sliders, etc. in the dashboard.</p>
  <h3>Warning</h3>
  <p>This node is for advanced use of the FlexDash topic tree. Instead of using raw in and
    raw out nodes use nodes from the
    <a href="https://flows.nodered.org/node/@flexdash/node-red-fd-corewidgets">
      @flexdash/node-red-fd-corewidgets</a> module or from other contributed
    modules. These have a 1-1 correspondence between nodes in the Node-Red flow and widgets
    in FlexDash and are therefore easier and more reliable to use.
  </p>
  <h3>Output</h3>
    <p>Messages sent by dashboard widgets are output with the topic to which the
      widget output is bound and the payload emitted by the widget.</p>
    <dl class="message-properties">
      <dt>topic <span class="property-type">string</span></dt>
      <dd>the topic to which the emitting widget output is bound in the dashboard.</dd>
      <dt>payload <span class="property-type">any</span></dt>
      <dd>the value emitted by the widget.</dd>
      <dt>_fd_socket <span class="property-type">string</span></dt>
      <dd>the id of the dashboard instance, may be used with a FlexDash Out node
        to send data only to a specific dashboard instance.</dd>
    </dl>
</script>
