<!-- FlexDash-in node for Node-RED
     Copyright (c) 2021 by Thorsten von Eicken, see LICENSE
-->

<script type="text/javascript">
  RED.nodes.registerType('flexdash in', {
    category: "flexdash",
    color: "#FDF0C2",
    defaults: {
      name:  {value:""},
      server:{value:"", required:true, type:"flexdash config"},
    },
    inputs: 0,
    outputs: 1,
    icon: "font-awesome/fa-th",

    label() { return this.name || "flexdash in" },
  });
</script>

<script type="text/html" data-template-name="flexdash in">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-server"><i class="fa fa-tag"></i> Dashboard</label>
    <input type="text" id="node-input-server">
  </div>
</script>

<script type="text/html" data-help-name="flexdash in">
  <p>Receives raw messages from FlexDash dashboard widgets for advanced usage.
    Input messages typically come from user input
    manipulating buttons, switches, sliders, etc. in the dashboard.</p>
  <h3>Output</h3>
    <p>Messages sent by dashboard widgets are output with the topic to which the
      widget output is bound and the payload emitted by the widget.</p>
    <dl class="message-properties">
      <dt>topic <span class="property-type">string</span></dt>
      <dd>the topic to which the emitting widget output is bound in the dashboard.</dd>
      <dt>payload <span class="property-type">any</span></dt>
      <dd>the value emitted by the widget.</dd>
      <dt>_flexdash_id <span class="property-type">string</span></dt>
      <dd>the id of the dashboard instance, may be used with a FlexDash Out node
        to send data only to a specific dashboard instance.</dd>
    </dl>
</script>
